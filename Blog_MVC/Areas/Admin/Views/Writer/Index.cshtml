@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/AdminLayout.cshtml";
}

<h1>Yazar Ajax İşlemleri</h1>
<br />
<button type="button" id="btngetlist" class="btn btn-outline-primary">Yazar Listesi</button>
@*Buton tetiklenince alttaki script çalışacak*@
<button type="button" id="btngetbyid" class="btn btn-outline-success">Yazar Getir</button>



<div id="writerlist">
	Buraya yazarlar gelecek
</div>

<br />



<div id="writerget">    @*buranın içeriği en alttaki scriptten geliyor idye göre yazar getirme işlemi*@
</div>

<br />



<div>
	<input type="text" id="writerid" placeholder="Yazarın id değerini giriniz" class="form-control" />
</div>




@*Yazarları getirme işlemindeki tabloyu script üzerinden göndereceğim*@
@*Alttaki işlemle beraber Ajax üzerinden konsol ekranına yazdıracağız*@
@*AJAX SAYESİNDE SAYFAYI YENİLEMEDEN VERİLERİMİ TABLO HALİNDE LİSTELEDİK*@

@section scripts{
	<script>


		$("#btngetlist").click(function () {
			$.ajax({
				contentType: "application/json",  //içeriğin türü
				dataType: "json",                   //veri türü
				type: "Get",
				url: "/Admin/Writer/WriterList/",
				success: function (func) {
					let w = jQuery.parseJSON(func);
					console.log(w);
					let tablehtml = "<div class='ibox-title'><h5>Yazar Listesi</h5></div><div class='ibox-content'><table class='table'><thead><tr><th> Yazar ID</th> <th> Yazar Adı </th></tr></thead>";
					$.each(w, (index, value) => {
						tablehtml += `<tr><td>${value.Id}</td> <td>${value.Name}</td></tr>`
					});
					tablehtml += "</table></div>";
					$("#writerlist").html(tablehtml);
				}
			});
		});


		$("#btngetbyid").click(x => {
			let id = $("#writerid").val();
			$.ajax({
				contentType: "application/json",
				dataType: "json",
				type: "get",
				url: "/Admin/Writer/GetWriterByID/",
				data: { writerid: id },
				success: function (fonksiyon1) {
					let w = jQuery.parseJSON(fonksiyon1);
					console.log(w);

					let getvalue = `<table class="table table-bordered"> <tr><th> Yazar ID</th> <th>Yazar Adı</th></tr> <tr><td>${w.Id}</td><td>${w.Name}</td></tr></table>`;
					$("#writerget").html(getvalue);					
				}
			});
		});
	</script>
}